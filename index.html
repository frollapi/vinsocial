<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VinSocial.vin – Decentralized Social Network</title>

  <!-- Gắn style và logo -->
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/png" href="logo.png" />
</head>
<body>

  <!-- PHẦN HEADER -->
  <header>
    <div class="container">
      <div class="logo">
        <img src="logo.png" alt="VinSocial Logo" />
        <h1>VinSocial.vin - Decentralized. Uncensored. Free Speech.</h1>
      </div>

      <!-- Hiển thị giá VIN -->
      <div class="vin-price" id="vinPrice">1 VIN ≈ $--</div>

      <!-- Nút mua VIN -->
      <div class="vin-trade">
        <a href="https://VinSwap.vin" target="_blank" class="trade-btn">Trade VIN/VIC</a>
      </div>

      <!-- Thông tin ví -->
      <div id="walletInfo" class="wallet-box hidden">
        <p><strong>Wallet:</strong> <span id="walletAddress">Not connected</span></p>
        <p><strong>Balance:</strong> <span id="vinBalance">-- VIN</span> | <span id="vicBalance">-- VIC</span></p>
        <button id="disconnectBtn" class="disconnect hidden">Disconnect</button>
      </div>

      <!-- Menu điều hướng -->
      <nav>
        <ul>
          <li><a href="#" id="homeBtn">Home</a></li>
          <li><a href="#" id="createBtn" class="hidden">Create Post</a></li>
          <li><a href="#" id="profileBtn" class="hidden">My Profile</a></li>
          <li><button id="connectBtn">Connect Wallet</button></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- PHẦN NỘI DUNG CHÍNH -->
  <main class="container">

    <!-- Khu vực Đăng ký (chỉ hiện sau khi kết nối ví, và chưa đăng ký) -->
    <section id="registerSection" class="card hidden">
      <h2>Register Account</h2>
      <form id="registerForm">
        <input type="text" id="nickname" placeholder="Nickname (required)" required />
        <input type="text" id="bio" placeholder="Bio (optional)" />
        <input type="url" id="avatarUrl" placeholder="Avatar URL (optional)" />
        <input type="url" id="website" placeholder="Website (optional)" />
        <button type="submit">Register – Pay 0.05 VIN</button>
      </form>
    </section>

    <!-- Khu vực tạo bài viết (chỉ hiện nếu đã đăng ký) -->
    <section id="createPostSection" class="card hidden">
      <h2>Create New Post</h2>
      <form id="postForm">
        <input type="text" id="postTitle" placeholder="Title" required />
        <textarea id="postContent" placeholder="What's on your mind?" required></textarea>
        <input type="url" id="mediaUrl" placeholder="Optional media URL (image/video)" />
        <button type="submit">Publish</button>
      </form>
    </section>

    <!-- Khu vực hiển thị danh sách bài viết -->
    <section id="feedSection" class="card">
      <h2>Latest Posts</h2>
      <div id="feedContainer">
        <!-- Bài viết sẽ được render bằng JS -->
      </div>
    </section>

  </main>

  <!-- PHẦN CHÂN TRANG -->
  <footer>
    <p>&copy; 2025 VinSocial.vin – 100% On-Chain, Freedom First.</p>
  </footer>

  <!-- Nhúng JS -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script src="app.js"></script>
  <script>
    // Lấy giá VIC từ Binance và tính giá VIN
    async function updateVinPrice() {
      try {
        const res = await fetch("https://api.binance.com/api/v3/ticker/price?symbol=VICUSDT");
        const data = await res.json();
        const vinPrice = parseFloat(data.price) * 100;
        document.getElementById("vinPrice").innerText = `1 VIN ≈ $${vinPrice.toFixed(2)} USD`;
      } catch (err) {
        console.error("Failed to fetch VIN price:", err);
      }
    }
    updateVinPrice();
  </script>
</body>
</html>
